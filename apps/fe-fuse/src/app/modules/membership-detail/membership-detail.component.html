<div class="container mx-auto p-4">
  @if (membership) {
    <div class="mx-auto max-w-2xl">
      <h1 class="mb-6 text-2xl font-bold">Confirm Your Membership</h1>

      <div class="mb-6 rounded-md bg-gray-100 p-4">
        <div class="mb-2 flex justify-between">
          <span>Plan:</span>
          <span class="font-bold">{{ membership.title }}</span>
        </div>
        <div class="mb-2 flex justify-between">
          <span>Price:</span>
          <span class="font-bold">${{ membership.price }}/{{ getDurationLabel(membership.duration_days) }}</span>
        </div>
        <div class="mb-2 flex justify-between">
          <span>Duration:</span>
          <span class="font-bold">{{ membership.duration_days }} days</span>
        </div>
      </div>

      <form [formGroup]="paymentForm" (ngSubmit)="onSubmit()">
        <div class="mb-4">
          <label class="mb-2 block">Full Name</label>
          <input type="text" formControlName="fullName" class="w-full rounded-md border p-2" placeholder="John Doe" />
          @if (paymentForm.get('fullName')?.invalid && paymentForm.get('fullName')?.touched) {
            <p class="mt-1 text-red-500">Full name is required</p>
          }
        </div>

        <div class="mb-4">
          <label class="mb-2 block">Email</label>
          <input type="email" formControlName="email" class="w-full rounded-md border p-2" placeholder="john@example.com" />
          @if (paymentForm.get('email')?.invalid && paymentForm.get('email')?.touched) {
            <p class="mt-1 text-red-500">Valid email is required</p>
          }
        </div>

        <div class="mb-4">
          <label class="mb-2 block">Card Number</label>
          <input type="text" formControlName="cardNumber" class="w-full rounded-md border p-2" placeholder="1234 5678 9012 3456" />
          @if (paymentForm.get('cardNumber')?.invalid && paymentForm.get('cardNumber')?.touched) {
            <p class="mt-1 text-red-500">Valid card number is required</p>
          }
        </div>

        <div class="mb-6 grid grid-cols-2 gap-4">
          <div>
            <label class="mb-2 block">Expiry Date</label>
            <input type="text" formControlName="expiryDate" class="w-full rounded-md border p-2" placeholder="MM/YY" />
            @if (paymentForm.get('expiryDate')?.invalid && paymentForm.get('expiryDate')?.touched) {
              <p class="mt-1 text-red-500">Valid expiry date is required</p>
            }
          </div>
          <div>
            <label class="mb-2 block">CVV</label>
            <input type="text" formControlName="cvv" class="w-full rounded-md border p-2" placeholder="123" />
            @if (paymentForm.get('cvv')?.invalid && paymentForm.get('cvv')?.touched) {
              <p class="mt-1 text-red-500">Valid CVV is required</p>
            }
          </div>
        </div>

        <div class="flex justify-between">
          <button type="button" class="rounded-md border px-4 py-2 hover:bg-gray-100" (click)="goBack()">Back to Plans</button>
          <button type="submit" class="bg-primary hover:bg-primary-dark rounded-md px-4 py-2 text-white" [disabled]="paymentForm.invalid">
            Confirm Payment
          </button>
        </div>
      </form>
    </div>
  } @else {
    <div class="py-8 text-center">
      <p>Loading membership details...</p>
    </div>
  }
</div>
