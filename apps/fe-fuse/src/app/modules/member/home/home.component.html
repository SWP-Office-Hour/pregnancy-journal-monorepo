<div class="flex min-w-0 flex-auto flex-col bg-white p-6">
  <!-- Header -->
  <section class="mb-12 flex w-full flex-col bg-transparent">
    <!-- Time-sensitive Welcome Section -->
    <div class="relative h-64 w-full overflow-hidden rounded-3xl shadow-lg">
      Dynamic Time-Based Backgrounds
      <!-- Morning Background -->
      <div
        class="absolute inset-0 bg-gradient-to-b from-blue-200 via-blue-100 to-pink-50 transition-opacity duration-1000"
        [ngClass]="{ 'opacity-100': getTimeOfDay() === 'morning', 'opacity-0': getTimeOfDay() !== 'morning' }"
      >
        <!-- Morning Sun -->
        <div class="animate-pulse-slow absolute right-10 top-6 h-20 w-20 rounded-full bg-yellow-200 shadow-lg shadow-yellow-300/50"></div>
        <!-- Morning Clouds -->
        <div class="animate-float-slow absolute left-10 top-12 h-10 w-24 opacity-80">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white">
            <path
              d="M6.5 20C4.01 20 2 17.99 2 15.5c0-2.27 1.7-4.14 3.9-4.43c.98-1.66 2.77-2.57 4.6-2.57c2.4 0 4.4 1.5 5.1 3.7c1.9.3 3.4 1.9 3.4 3.8c0 2.21-1.79 4-4 4H6.5z"
            />
          </svg>
        </div>
        <div class="animate-float-slow-delayed absolute right-20 top-20 h-6 w-16">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white">
            <path
              d="M6.5 20C4.01 20 2 17.99 2 15.5c0-2.27 1.7-4.14 3.9-4.43c.98-1.66 2.77-2.57 4.6-2.57c2.4 0 4.4 1.5 5.1 3.7c1.9.3 3.4 1.9 3.4 3.8c0 2.21-1.79 4-4 4H6.5z"
            />
          </svg>
        </div>
      </div>

      <!-- Afternoon Background -->
      <div
        class="via-yellow-250 to-orange-250 absolute inset-0 bg-gradient-to-b from-blue-300 transition-opacity duration-1000"
        [ngClass]="{ 'opacity-100': getTimeOfDay() === 'afternoon', 'opacity-0': getTimeOfDay() !== 'afternoon' }"
      >
        <!-- Afternoon Sun -->
        <div class="absolute right-16 top-10 h-16 w-16 rounded-full bg-yellow-300 shadow-lg shadow-yellow-400/30"></div>
        <!-- Afternoon Clouds -->
        <div class="animate-float-med absolute left-16 top-8 h-8 w-20 opacity-80">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white">
            <path
              d="M6.5 20C4.01 20 2 17.99 2 15.5c0-2.27 1.7-4.14 3.9-4.43c.98-1.66 2.77-2.57 4.6-2.57c2.4 0 4.4 1.5 5.1 3.7c1.9.3 3.4 1.9 3.4 3.8c0 2.21-1.79 4-4 4H6.5z"
            />
          </svg>
        </div>
      </div>

      <!-- Evening Background -->
      <div
        class="absolute inset-0 bg-gradient-to-b from-indigo-200 via-purple-100 to-pink-200 transition-opacity duration-1000"
        [ngClass]="{ 'opacity-100': getTimeOfDay() === 'evening', 'opacity-0': getTimeOfDay() !== 'evening' }"
      >
        <!-- Evening Moon -->
        <div class="absolute right-12 top-8 h-14 w-14 rounded-full bg-white shadow-lg shadow-white/40"></div>
        <!-- Evening Stars -->
        <div class="animate-twinkle absolute left-24 top-14 h-2 w-2 rounded-full bg-white"></div>
        <div class="animate-twinkle-delay absolute left-40 top-10 h-1 w-1 rounded-full bg-white"></div>
        <div class="animate-twinkle absolute right-40 top-20 h-1.5 w-1.5 rounded-full bg-white"></div>
      </div>

      <!-- Night Background -->
      <div
        class="absolute inset-0 bg-gradient-to-b from-indigo-900 via-purple-800 to-indigo-800 transition-opacity duration-1000"
        [ngClass]="{ 'opacity-100': getTimeOfDay() === 'night', 'opacity-0': getTimeOfDay() !== 'night' }"
      >
        <!-- Night Moon -->
        <div class="absolute right-16 top-8 h-12 w-12 rounded-full bg-gray-100 shadow-lg shadow-white/20"></div>
        <!-- Night Stars -->
        <div class="animate-twinkle absolute left-14 top-10 h-1.5 w-1.5 rounded-full bg-white"></div>
        <div class="animate-twinkle-delay absolute left-28 top-16 h-2 w-2 rounded-full bg-white"></div>
        <div class="animate-twinkle-delay absolute right-36 top-8 h-1 w-1 rounded-full bg-white"></div>
        <div class="animate-twinkle absolute right-20 top-24 h-1.5 w-1.5 rounded-full bg-white"></div>
        <div class="animate-twinkle absolute left-40 top-20 h-1 w-1 rounded-full bg-white"></div>
      </div>

      <!-- Content Container -->
      <div class="relative z-10 flex w-full px-6 py-8 sm:px-8">
        <div class="my-4 flex min-w-0 flex-auto flex-col sm:my-6 sm:flex-row sm:items-center">
          <!-- Left Side: Avatar and Greeting -->
          <div class="flex min-w-0 flex-auto items-center">
            <div class="flex-0 animate-fade-in h-20 w-20 overflow-hidden rounded-full border-4 border-white/30 shadow-lg">
              <img class="h-full w-full object-cover" src="images/avatars/female-18.jpg" alt="Profile" />
            </div>

            <div class="animate-slide-up ml-4 flex min-w-0 flex-col">
              <div class="flex flex-col items-start">
                <!-- Time-based greeting message -->
                <h2 class="text-2xl font-bold text-white drop-shadow-md">
                  {{ getGreetingMessage() }}
                </h2>
                <h1 class="font-playful text-3xl tracking-wide text-white drop-shadow-md">
                  {{ user.name }}! <span class="ml-2">{{ getTimeEmoji() }}</span>
                </h1>
              </div>

              <!-- Time-based message -->
              <p class="text-pink-450 mt-3 max-w-md text-lg drop-shadow-sm">
                {{ getTimeMessage() }}
              </p>

              <!-- Notifications -->
              <div class="mt-5 flex items-center rounded-full bg-pink-400 px-4 py-2 backdrop-blur-sm">
                <mat-icon class="icon-size-5 text-white/90" [svgIcon]="'heroicons_solid:bell'"></mat-icon>
                <div class="ml-2 truncate text-sm font-medium text-white">Bạn có 2 tin nhắn mới và 15 nhiệm vụ mới</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Visit record Button - Enhanced Maternal Version -->
    <a
      [routerLink]="'/record'"
      class="maternal-checkup-btn group relative z-10 -mt-10 mb-4 flex w-full max-w-md cursor-pointer items-center justify-center self-center overflow-hidden rounded-full bg-gradient-to-r from-pink-400/90 via-purple-300/90 to-pink-400/90 px-6 py-4 text-center text-white shadow-lg transition-all duration-300 hover:bg-gradient-to-r hover:from-pink-500/90 hover:via-purple-400/90 hover:to-pink-500/90 hover:shadow-xl sm:mb-6"
    >
      <!-- Icon changes based on time of day -->
      <div class="mr-3 flex h-10 w-10 items-center justify-center rounded-full bg-white/25 backdrop-blur-sm">
        @if (getTimeOfDay() === 'morning') {
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"
            />
          </svg>
        } @else if (getTimeOfDay() === 'afternoon') {
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
            />
          </svg>
        } @else if (getTimeOfDay() === 'evening' || getTimeOfDay() === 'night') {
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"
            />
          </svg>
        }
      </div>

      <!-- Text changes based on whether a checkup has been recorded today -->
      <div class="text-2xl font-medium">
        <span class="flex items-center">
          <span class="block font-bold">Ghi lại ngày khám hôm nay</span>
        </span>
      </div>
    </a>
  </section>

  <!-- Noti & Blog & Mini Chart-->
  <section class="mb-8 grid w-full min-w-0 grid-cols-1 gap-8 sm:grid-cols-1 md:grid-cols-3">
    <!-- Nhắc nhở-->
    <div
      class="bg-card col-span-3 flex flex-auto flex-col overflow-hidden rounded-2xl border border-pink-100 bg-white/90 p-2 shadow-lg backdrop-blur-sm lg:col-span-1"
    >
      <app-home-reminder></app-home-reminder>
    </div>
    <!-- Mini Tracking Chart -->
    <div
      class="bg-card col-span-3 flex flex-auto flex-col overflow-hidden rounded-2xl border border-pink-100 bg-white/90 p-6 shadow-lg backdrop-blur-sm lg:col-span-1"
    ></div>
    <!-- Recommend Blog -->
    <div
      class="bg-card col-span-3 flex flex-auto flex-col overflow-hidden rounded-2xl border border-pink-100 bg-white/90 p-6 shadow-lg backdrop-blur-sm lg:col-span-1"
    >
      <app-recommended-blogs></app-recommended-blogs>
    </div>
  </section>

  <!-- Popular Tools Section -->
  <section>
    <div class="mb-12 rounded-3xl bg-gradient-to-br from-blue-50 via-purple-50/30 to-pink-50/30 p-6 shadow-lg">
      <div class="flex flex-col gap-8 lg:flex-row">
        <!-- Left Section: Title & Description -->
        <div class="flex flex-col items-start justify-center space-y-6 lg:w-1/4">
          <div>
            <h2 class="mb-2 bg-gradient-to-r from-pink-500 to-purple-500 bg-clip-text text-3xl font-bold text-transparent md:text-4xl">
              Công cụ đặc biệt dành riêng cho mẹ bầu!
            </h2>
            <p class="text-lg text-gray-600">Hành trình mang thai trở nên dễ dàng hơn với các công cụ hỗ trợ thông minh. Khám phá ngay!</p>
          </div>
        </div>

        <!-- Right Section: Tool Cards -->
        <div class="grid flex-1 grid-cols-1 gap-6 sm:grid-cols-3">
          <!-- Baby Names Finder Tool -->
          <div
            (click)="openFirstTool()"
            class="maternal-tool-card group relative overflow-hidden rounded-xl border border-green-100 bg-white p-5 shadow-sm transition-all duration-300 hover:-translate-y-1 hover:shadow-lg"
          >
            <div class="absolute -right-12 -top-12 h-24 w-24 rounded-full bg-green-50 opacity-40"></div>
            <div class="absolute -bottom-6 -left-6 h-20 w-20 rounded-full bg-green-50 opacity-30"></div>

            <!-- Tool Icon -->
            <img
              src="/images/ui/tool/Tool2.svg"
              alt="Baby Names Finder"
              class="mb-6 h-16 w-16 transition-all duration-300 group-hover:rotate-6 group-hover:scale-110"
            />

            <!-- Tool Title -->
            <h3 class="mb-2 text-xl font-bold text-gray-800">Tìm Tên Em Bé</h3>

            <!-- Tool Description -->
            <p class="mb-6 text-gray-600">Khám phá hàng nghìn tên cho bé gái và bé trai với ý nghĩa đặc biệt và nguồn gốc.</p>

            <!-- Tool Button -->
            <div
              class="group/btn mt-auto inline-flex items-center rounded-full bg-green-100 px-5 py-2 text-sm font-medium text-green-600 transition-all hover:bg-green-200 active:scale-95"
            >
              Khám phá ngay
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="ml-1 h-4 w-4 transition-transform duration-300 group-hover/btn:translate-x-1"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
              </svg>
            </div>
          </div>

          <!-- Due Date Calculator Tool -->
          <div
            (click)="openSecondTool()"
            class="maternal-tool-card group relative overflow-hidden rounded-xl border border-orange-100 bg-white p-5 shadow-sm transition-all duration-300 hover:-translate-y-1 hover:shadow-lg"
          >
            <div class="absolute -right-12 -top-12 h-24 w-24 rounded-full bg-orange-50 opacity-40"></div>
            <div class="absolute -bottom-6 -left-6 h-20 w-20 rounded-full bg-orange-50 opacity-30"></div>

            <!-- Tool Icon -->
            <img
              src="/images/ui/tool/Tool3.svg"
              alt="Due Date Calculator"
              class="mb-6 h-16 w-16 transition-all duration-300 group-hover:rotate-6 group-hover:scale-110"
            />

            <!-- Tool Title -->
            <h3 class="mb-2 text-xl font-bold text-gray-800">Tính Ngày Dự Sinh</h3>

            <!-- Tool Description -->
            <p class="mb-6 text-gray-600">Dự đoán ngày sinh của em bé và tìm hiểu các cột mốc quan trọng trong thai kỳ của bạn.</p>

            <!-- Tool Button -->
            <div
              class="group/btn mt-auto inline-flex items-center rounded-full bg-orange-100 px-5 py-2 text-sm font-medium text-orange-600 transition-all hover:bg-orange-200 active:scale-95"
            >
              Tính ngay
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="ml-1 h-4 w-4 transition-transform duration-300 group-hover/btn:translate-x-1"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
              </svg>
            </div>
          </div>

          <!-- Pregnancy Evolution Tool -->
          <div
            (click)="openThirdTool()"
            class="maternal-tool-card group relative overflow-hidden rounded-xl border border-pink-100 bg-white p-5 shadow-sm transition-all duration-300 hover:-translate-y-1 hover:shadow-lg"
          >
            <div class="absolute -right-12 -top-12 h-24 w-24 rounded-full bg-pink-50 opacity-40"></div>
            <div class="absolute -bottom-6 -left-6 h-20 w-20 rounded-full bg-pink-50 opacity-30"></div>

            <!-- Tool Icon -->
            <img
              src="/images/ui/tool/Tool1.svg"
              alt="Pregnancy Evolution"
              class="mb-6 h-16 w-16 transition-all duration-300 group-hover:rotate-6 group-hover:scale-110"
            />

            <!-- Tool Title -->
            <h3 class="mb-2 text-xl font-bold text-gray-800">Quá Trình Phát Triển</h3>

            <!-- Tool Description -->
            <p class="mb-6 text-gray-600">Theo dõi sự phát triển của em bé qua từng tuần với hình ảnh và thông tin chi tiết.</p>

            <!-- Tool Button -->
            <div
              class="group/btn mt-auto inline-flex items-center rounded-full bg-pink-100 px-5 py-2 text-sm font-medium text-pink-600 transition-all hover:bg-pink-200 active:scale-95"
            >
              Xem chi tiết
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="ml-1 h-4 w-4 transition-transform duration-300 group-hover/btn:translate-x-1"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
              </svg>
            </div>
          </div>
        </div>

        <!-- Pregnancy Countdown Calendar -->
        <div
          class="calendar-countdown relative mx-auto w-full max-w-xs transform rounded-2xl bg-white shadow-lg transition-all duration-500 hover:scale-105 hover:shadow-xl sm:max-w-sm"
          [ngClass]="{ 'animate-celebration': remainingDays() <= 0 }"
        >
          <!-- Calendar Top Part with Hanging Rings -->
          <div class="calendar-top relative rounded-t-2xl bg-gradient-to-r from-pink-400 to-pink-500 pb-6 pt-4 shadow-lg">
            <!-- Calendar Rings -->
            <div class="absolute left-0 top-0 z-50 flex w-full justify-around">
              <div class="calendar-ring-outer -mt-2 h-8 w-6 rounded-full bg-gradient-to-r from-pink-800 via-pink-950 to-pink-800 shadow-lg"></div>
              <div class="calendar-ring-outer -mt-2 h-8 w-6 rounded-full bg-gradient-to-r from-pink-800 via-pink-950 to-pink-800 shadow-lg"></div>
            </div>
            <div class="absolute left-0 top-0 z-20 flex w-full justify-around">
              <div
                class="calendar-ring-inner mt-1 h-8 w-8 rounded-full border-2 border-solid border-pink-500 shadow-inner"
                style="background-image: radial-gradient(#0a0a0a, #be5985, #ec7fa9, #ffb8e0, #ffedfa)"
              ></div>
              <div
                class="calendar-ring-inner mt-1 h-8 w-8 rounded-full border-2 border-solid border-pink-500 shadow-inner"
                style="background-image: radial-gradient(#0a0a0a, #be5985, #ec7fa9, #ffb8e0, #ffedfa)"
              ></div>
            </div>

            <!-- Calendar Tear Effect -->
            <div class="absolute left-0 top-10 h-px w-full bg-gradient-to-r from-pink-200 via-white to-pink-200 opacity-30"></div>

            <!-- Calendar Title -->
            <div class="mt-6 text-center">
              <h2 class="font-playful text-3xl font-bold italic tracking-wide text-white drop-shadow-md">Đếm ngược kỳ diệu</h2>
              <!-- Decorative accents -->
              <div class="mx-auto mt-1 h-1 w-24 rounded-full bg-white/30"></div>
            </div>
          </div>

          <!-- Calendar Bottom Part with Days Count -->
          <div
            class="calendar-bottom relative rounded-b-2xl px-4 pb-8 pt-6"
            style="background-image: linear-gradient(#ffffff 1.1rem, #ccc 1.2rem); background-size: 100% 1.2rem"
          >
            <!-- Days Counter -->
            <div class="relative z-10">
              @if (remainingDays() <= 0) {
                <div class="animation-scale-in text-center">
                  <div class="text-2xl font-bold text-pink-500">Chúc mừng mẹ bầu!</div>
                  <div class="mt-2 text-lg font-medium text-pink-400">Bé yêu đã đến ngày chào đời</div>
                  <div class="mt-4">
                    <!--                  <lottie-player-->
                    <!--                    src="https://assets10.lottiefiles.com/packages/lf20_ky24lmgu.json"-->
                    <!--                    background="transparent"-->
                    <!--                    speed="1"-->
                    <!--                    style="width: 150px; height: 150px; margin: 0 auto"-->
                    <!--                    loop-->
                    <!--                    autoplay-->
                    <!--                  >-->
                    <!--                  </lottie-player>-->
                  </div>
                </div>
              } @else {
                <div class="text-center">
                  <div
                    [@countChange]="remainingDays()"
                    class="calendar-days-number text-center text-6xl font-black tracking-tighter text-pink-600 sm:text-8xl"
                  >
                    {{ remainingDays() }}
                  </div>
                  <div class="calendar-days-text mt-1 text-center text-lg font-medium text-pink-400">Ngày Còn Lại</div>

                  <!-- Week indicator -->
                  <div class="mt-4 inline-block rounded-full bg-pink-100 px-4 py-1 text-sm font-medium text-pink-600">
                    Tuần thứ {{ currentPregnancyWeek }}
                  </div>
                </div>
              }
              <!-- Calendar page curl effect -->
              <div class="absolute bottom-0 right-0 h-12 w-12 rounded-tl-lg bg-gradient-to-br from-transparent to-gray-200/50 shadow-inner"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>
